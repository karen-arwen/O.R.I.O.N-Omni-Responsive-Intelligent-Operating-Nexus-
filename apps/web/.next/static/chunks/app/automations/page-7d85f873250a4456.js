(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[371],{1296:function(e,t,a){Promise.resolve().then(a.bind(a,1584))},1584:function(e,t,a){"use strict";a.r(t),a.d(t,{default:function(){return AutomationsPage}});var n=a(7573),o=a(7653),i=a(5025),s=a(8673);let l=s.Ry({id:s.Z_(),name:s.Z_(),enabled:s.O7().default(!0),condition:s.Ry({kind:s.Z_().optional(),type:s.Z_().optional(),domain:s.Z_().optional(),riskAbove:s.Rx().optional(),trustBelow:s.Rx().optional()}),action:s.Km(["alert","save_view","open_mission","notify"]).default("alert"),createdAt:s.Z_().optional()}),r="orion-automations",loadAutomations=()=>{let e=localStorage.getItem(r);if(!e)return[];try{let t=JSON.parse(e),a=s.IX(l).safeParse(t);return a.success?a.data:[]}catch(e){return[]}},saveAutomations=e=>{localStorage.setItem(r,JSON.stringify(e))};var d=a(6141);let nanoid=(e=21)=>crypto.getRandomValues(new Uint8Array(e)).reduce((e,t)=>((t&=63)<36?e+=t.toString(36):t<62?e+=(t-26).toString(36).toUpperCase():t>62?e+="-":e+="_",e),"");function AutomationsPage(){var e,t;let[a,s]=(0,o.useState)([]),l=(0,d.mU)({limit:200}),r=null!==(t=null===(e=l.data)||void 0===e?void 0:e.pages.flatMap(e=>e.items))&&void 0!==t?t:[];return(0,o.useEffect)(()=>{s(loadAutomations())},[]),(0,n.jsx)(i.Z,{children:(0,n.jsxs)("div",{className:"space-y-4 max-w-4xl mx-auto",children:[(0,n.jsxs)("header",{className:"flex items-center justify-between",children:[(0,n.jsxs)("div",{children:[(0,n.jsx)("h1",{className:"text-2xl font-semibold",children:"Automation Studio"}),(0,n.jsx)("p",{className:"text-sm text-muted-foreground",children:"IF/THEN local-only"})]}),(0,n.jsx)("button",{className:"rounded-lg bg-primary text-primary-foreground px-3 py-2 text-sm",onClick:()=>{let e={id:nanoid(),name:"Nova automa\xe7\xe3o",condition:{kind:"decision"},action:"alert",enabled:!0},t=[e,...a];s(t),saveAutomations(t)},children:"Nova automa\xe7\xe3o"})]}),(0,n.jsxs)("div",{className:"space-y-2",children:[a.map(e=>{var t;return(0,n.jsxs)("div",{className:"rounded-lg border border-white/10 bg-white/5 px-3 py-2 flex items-center justify-between",children:[(0,n.jsxs)("div",{children:[(0,n.jsx)("p",{className:"text-sm font-medium",children:e.name}),(0,n.jsxs)("p",{className:"text-xs text-muted-foreground",children:["kind:",null!==(t=e.condition.kind)&&void 0!==t?t:"any"," action:",e.action]})]}),(0,n.jsxs)("label",{className:"text-xs text-muted-foreground flex items-center gap-1",children:[(0,n.jsx)("input",{type:"checkbox",checked:e.enabled,onChange:t=>{let n=a.map(a=>a.id===e.id?{...a,enabled:t.target.checked}:a);s(n),saveAutomations(n)}}),"enabled"]})]},e.id)}),0===a.length&&(0,n.jsx)("p",{className:"text-sm text-muted-foreground",children:"Nenhuma automa\xe7\xe3o."})]}),(0,n.jsx)("button",{className:"rounded-lg bg-white/5 border border-white/10 px-3 py-2 text-sm",onClick:()=>{let e=r.length;alert("Simulado em ".concat(e," eventos. (Stub)"))},children:"Run against last 200 events"})]})})}}},function(e){e.O(0,[274,54,447,786,529,25,293,53,744],function(){return e(e.s=1296)}),_N_E=e.O()}]);